(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{785:(e,t,r)=>{Promise.resolve().then(r.bind(r,207))},207:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(5155),s=r(2115),n=r(5665),l=r(1073),o=r(1455),d=r.n(o),i=r(3474),c=r.n(i),u=r(543),m=r.n(u),p=r(1052),f=r.n(p),g=r(3312),h=r(3900),x=r(3416);d().extend(c()),d().extend(m()),d().extend(f());let b=Intl.DateTimeFormat().resolvedOptions().timeZone;function v(){let[e,t]=(0,s.useState)([]),[r,o]=(0,s.useState)(0),[i,c]=(0,s.useState)(0),[u,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),v=async()=>{let e=await (0,n.lQ)({page:i,size:20});t(e.data.data.recordReports||[]),o(e.data.data.total||0)},y=(0,x.m)({defaultValues:{uniqueId:"",daysBefore:""},onSubmit:async e=>{let{value:t}=e;m(t.uniqueId),t.daysBefore&&f(d()().subtract(+t.daysBefore,"day").toISOString())}});(0,s.useEffect)(()=>{v()},[v,i,u,p]);let N=[{accessorKey:"record.uniqueId",header:"UniqueId",cell:e=>{let{getValue:t}=e;return t()||"-"}},{accessorKey:"record.type",header:"Type",cell:e=>{let{getValue:t}=e;return t()||"-"}},{accessorKey:"content",header:"Content"},{accessorKey:"createdAt",header:"CreatedAt",cell:e=>{let{row:t}=e;return d().utc(t.getValue("createdAt")).tz(b).format("YYYY-MM-DD HH:mm:ss")}},{accessorKey:"isDeleted",header:"IsDeleted"},{accessorKey:"id",header:"Action",cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(g.$,{size:"sm",variant:"destructive",onClick:async()=>{await (0,n.wG)({recordReportId:t.getValue("id")},{isDeleted:!0}),await v()},children:"Soft Delete"})})}}];return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-semibold text-lg py-1",children:"Record"}),(0,a.jsxs)("form",{className:"pt-2 pb-4 flex gap-4",onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),y.handleSubmit()},children:[(0,a.jsx)(y.Field,{name:"uniqueId",children:e=>(0,a.jsx)(h.p,{placeholder:"Unique Id",value:e.state.value,className:"w-60",onChange:t=>{e.handleChange(t.target.value)}})}),(0,a.jsx)(y.Field,{name:"daysBefore",children:e=>(0,a.jsx)(h.p,{placeholder:"daysBefore",value:e.state.value,className:"w-60",onChange:t=>{e.handleChange(t.target.value)}})}),(0,a.jsx)(y.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:e=>{let[t,r]=e;return(0,a.jsx)(g.$,{type:"submit",disabled:!t,children:r?"Searching":"Search"})}})]}),(0,a.jsx)(l.b,{columns:N,data:e,page:i,size:20,onPaginationChange:e=>{c(e)},total:r})]})}},1073:(e,t,r)=>{"use strict";r.d(t,{b:()=>h});var a=r(5155),s=r(9789),n=r(9083),l=r(2115),o=r(1567);let d=l.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",r),...s})})});d.displayName="Table";let i=l.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let c=l.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",r),...s})});c.displayName="TableBody",l.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let u=l.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});u.displayName="TableRow";let m=l.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,o.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});m.displayName="TableHead";let p=l.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,o.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});p.displayName="TableCell",l.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption";var f=r(3312),g=r(8986);function h(e){var t;let{columns:r,data:o,page:h,size:x,total:b,onPaginationChange:v,onSortingChange:y}=e,[N,j]=(0,l.useState)([]),[w,R]=(0,l.useState)({pageIndex:h,pageSize:x});(0,l.useEffect)(()=>{R({pageIndex:h,pageSize:x})},[h,x]),(0,l.useEffect)(()=>{v(w.pageIndex)},[w.pageIndex,v]);let S=(0,s.N4)({data:o,columns:r,getCoreRowModel:(0,n.HT)(),getPaginationRowModel:(0,n.kW)(),rowCount:b,state:{pagination:w,sorting:N},manualPagination:!0,onPaginationChange:R,onSortingChange:j});return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(d,{children:[(0,a.jsx)(i,{children:S.getHeaderGroups().map(e=>(0,a.jsx)(u,{children:e.headers.map(e=>(0,a.jsx)(m,{children:e.isPlaceholder?null:(0,s.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(c,{children:(null===(t=S.getRowModel().rows)||void 0===t?void 0:t.length)?S.getRowModel().rows.map(e=>(0,a.jsx)(u,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(p,{children:(0,s.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(u,{children:(0,a.jsx)(p,{colSpan:r.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,a.jsxs)(g.J,{children:["Total: ",b]}),(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>S.previousPage(),disabled:!S.getCanPreviousPage(),children:"Previous"}),(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>S.nextPage(),disabled:!S.getCanNextPage(),children:"Next"})]})]})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var a=r(5155),s=r(2115),n=r(2317),l=r(1027),o=r(1567);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:i=!1,...c}=e,u=i?n.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(d({variant:s,size:l,className:r})),ref:t,...c})});i.displayName="Button"},3900:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var a=r(5155),s=r(2115),n=r(1567);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},8986:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var a=r(5155),s=r(2115),n=r(6195),l=r(1027),o=r(1567);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,o.cn)(d(),r),...s})});i.displayName=n.b.displayName},3865:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a={NODE_ENV:"production",CLIENT_BASE:"http://localhost:3000",APP_NAME:"Hello",CLIENT_API_BASE:"http://localhost:3000",NEXT_PUBLIC_TURNSTILE_SITE_KEY:r(2818).env.NEXT_PUBLIC_TURNSTILE_SITE_KEY}},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(3463),s=r(9795);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},5665:(e,t,r)=>{"use strict";r.d(t,{LK:()=>u,Y:()=>p,lQ:()=>f,tB:()=>c,Jm:()=>m,U5:()=>i,wG:()=>g});var a=r(2651),s=r(3865);let n=(e,t)=>{let r=e;return Object.entries(t).forEach(e=>{let[t,a]=e;r=r.replace(":".concat(t),"".concat(a))}),r},l=((e,t)=>{let r=Object.entries(e),a={};for(let[e,s]of r)a[e]="".concat(t).concat(s);return a})({postLogin:"/auth/login",getRecords:"/records",deleteRecord:"/records/:id",getUrls:"/urls",getAssets:"/assets",getRecordReports:"/recordReports",putRecordReports:"/recordReports/:recordReportId"},"".concat(s.A.CLIENT_API_BASE,"/d/admin")),o=a.A.create({}),d=a.A.create({});d.interceptors.request.use(e=>{var t;let r=null===(t=document.cookie.split("; ").find(e=>e.startsWith("Authorization=")))||void 0===t?void 0:t.split("=")[1];return console.log("token",r),r&&(e.headers.Authorization=r),e},e=>Promise.reject(e));let i=async e=>{let{email:t,password:r,captchToken:a}=e;return o.post(l.postLogin,{email:t,password:r,captchToken:a})},c=async e=>{let{page:t,size:r,uniqueId:a,createdAtGt:s,createdAtLt:n}=e;return d.get(l.getRecords,{params:{page:t,size:r,uniqueId:a,createdAtGt:s,createdAtLt:n}})},u=async(e,t)=>{let{id:r}=e,{soft:a}=t,s=n(l.deleteRecord,{id:r});return d.delete(s,{data:{soft:a}})},m=async e=>{let{page:t,size:r,recordId:a,content:s}=e;return d.get(l.getUrls,{params:{page:t,size:r,recordId:a,content:s}})},p=async e=>{let{page:t,size:r,recordId:a,key:s}=e;return d.get(l.getAssets,{params:{page:t,size:r,recordId:a,key:s}})},f=async e=>{let{page:t,size:r}=e;return d.get(l.getRecordReports,{params:{page:t,size:r}})},g=async(e,t)=>{let{recordReportId:r}=e,a=n(l.putRecordReports,{recordReportId:r});return console.log("url",a),d.put(a,{data:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[906,22,749,441,517,358],()=>t(785)),_N_E=e.O()}]);