(()=>{var e={};e.id=779,e.ids=[779],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},8411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var s=r(260),a=r(8203),o=r(5155),n=r.n(o),i=r(7292),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let l=["",{children:["(authorization)",{children:["a",{children:["record",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9824)),"/Users/haoli/Documents/self-dev/cabbage-admin/src/app/(authorization)/a/record/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1369)),"/Users/haoli/Documents/self-dev/cabbage-admin/src/app/(authorization)/a/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/Users/haoli/Documents/self-dev/cabbage-admin/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/haoli/Documents/self-dev/cabbage-admin/src/app/(authorization)/a/record/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(authorization)/a/record/page",pathname:"/a/record",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},1758:(e,t,r)=>{Promise.resolve().then(r.bind(r,9824))},4806:(e,t,r)=>{Promise.resolve().then(r.bind(r,1631))},1631:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var s=r(5512),a=r(8009),o=r(3277),n=r(4399),i=r(6589),d=r.n(i),l=r(3730),c=r.n(l),u=r(317),p=r.n(u),m=r(3794),h=r.n(m),x=r(9400);let g=(0,r(4825).A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var f=r(7722),b=r(764);d().extend(c()),d().extend(p()),d().extend(h());let v=Intl.DateTimeFormat().resolvedOptions().timeZone;function y(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(0),[l,c]=(0,a.useState)(0),[u,p]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),y=async()=>{let e=await (0,o.tB)({page:l,size:20,uniqueId:u,createdAtLt:m});t(e.data.data.records||[]),i(e.data.data.total||0)},j=(0,b.m)({defaultValues:{uniqueId:"",daysBefore:""},onSubmit:async({value:e})=>{p(e.uniqueId),e.daysBefore&&h(d()().subtract(+e.daysBefore,"day").toISOString())}}),N=[{accessorKey:"id",header:"Id"},{accessorKey:"uniqueId",header:"UniqueId"},{accessorKey:"type",header:"Type"},{accessorKey:"expireIn",header:"ExpireIn",cell:({row:e})=>{let t=e.getValue("expireIn");return t?d().duration(+t,"seconds").format("m分s秒"):(0,s.jsx)(s.Fragment,{children:"-"})}},{accessorKey:"expireAt",header:"ExpireAt",cell:({row:e})=>{let t=e.getValue("expireAt");return t?d().utc(`${t}`).tz(v).format("YYYY-MM-DD HH:mm:ss"):(0,s.jsx)(s.Fragment,{children:"-"})}},{accessorKey:"createdAt",enableSorting:!0,header:({column:e})=>(0,s.jsxs)(x.$,{size:"sm",variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["CreatedAt",(0,s.jsx)(g,{})]}),cell:({row:e})=>d().utc(e.getValue("createdAt")).tz(v).format("YYYY-MM-DD HH:mm:ss")},{accessorKey:"isDeleted",header:"IsDeleted"},{header:"Action",cell:({row:e})=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(x.$,{size:"sm",variant:"destructive",onClick:async()=>{await (0,o.LK)({id:e.getValue("id")},{soft:!0}),await y()},children:"Soft Delete"}),(0,s.jsx)(x.$,{size:"sm",variant:"destructive",onClick:async()=>{await (0,o.LK)({id:e.getValue("id")},{soft:!1}),await y()},children:"Delete"})]})}];return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-semibold text-lg py-1",children:"Record"}),(0,s.jsxs)("form",{className:"pt-2 pb-4 flex gap-4",onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),j.handleSubmit()},children:[(0,s.jsx)(j.Field,{name:"uniqueId",children:e=>(0,s.jsx)(f.p,{placeholder:"Unique Id",value:e.state.value,className:"w-60",onChange:t=>{e.handleChange(t.target.value)}})}),(0,s.jsx)(j.Field,{name:"daysBefore",children:e=>(0,s.jsx)(f.p,{placeholder:"daysBefore",value:e.state.value,className:"w-60",onChange:t=>{e.handleChange(t.target.value)}})}),(0,s.jsx)(j.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:([e,t])=>(0,s.jsx)(x.$,{type:"submit",disabled:!e,children:t?"Searching":"Search"})})]}),(0,s.jsx)(n.b,{columns:N,data:e,page:l,size:20,onPaginationChange:e=>{c(e)},total:r})]})}},4399:(e,t,r)=>{"use strict";r.d(t,{b:()=>g});var s=r(5512),a=r(1),o=r(3525),n=r(8009),i=r(4195);let d=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})}));d.displayName="Table";let l=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:(0,i.cn)("[&_tr]:border-b",e),...t}));l.displayName="TableHeader";let c=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t}));c.displayName="TableBody",n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let u=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));u.displayName="TableRow";let p=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:(0,i.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));p.displayName="TableHead";let m=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:(0,i.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));m.displayName="TableCell",n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";var h=r(9400),x=r(2628);function g({columns:e,data:t,page:r,size:i,total:g,onPaginationChange:f,onSortingChange:b}){let[v,y]=(0,n.useState)([]),[j,N]=(0,n.useState)({pageIndex:r,pageSize:i}),w=(0,a.N4)({data:t,columns:e,getCoreRowModel:(0,o.HT)(),getPaginationRowModel:(0,o.kW)(),rowCount:g,state:{pagination:j,sorting:v},manualPagination:!0,onPaginationChange:N,onSortingChange:y});return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(d,{children:[(0,s.jsx)(l,{children:w.getHeaderGroups().map(e=>(0,s.jsx)(u,{children:e.headers.map(e=>(0,s.jsx)(p,{children:e.isPlaceholder?null:(0,a.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(c,{children:w.getRowModel().rows?.length?w.getRowModel().rows.map(e=>(0,s.jsx)(u,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(m,{children:(0,a.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(u,{children:(0,s.jsx)(m,{colSpan:e.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,s.jsxs)(x.J,{children:["Total: ",g]}),(0,s.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>w.previousPage(),disabled:!w.getCanPreviousPage(),children:"Previous"}),(0,s.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>w.nextPage(),disabled:!w.getCanNextPage(),children:"Next"})]})]})}},2628:(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var s=r(5512),a=r(8009),o=r(2405),n=r(1643),i=r(4195);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(o.b,{ref:r,className:(0,i.cn)(d(),e),...t}));l.displayName=o.b.displayName},1727:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s={NODE_ENV:"production",CLIENT_BASE:"http://localhost:3000",APP_NAME:"Hello",CLIENT_API_BASE:"http://localhost:3000",NEXT_PUBLIC_TURNSTILE_SITE_KEY:process.env.NEXT_PUBLIC_TURNSTILE_SITE_KEY}},3277:(e,t,r)=>{"use strict";r.d(t,{LK:()=>u,Y:()=>m,lQ:()=>h,tB:()=>c,Jm:()=>p,U5:()=>l,wG:()=>x});var s=r(5668),a=r(1727);let o=(e,t)=>{let r=e;return Object.entries(t).forEach(([e,t])=>{r=r.replace(`:${e}`,`${t}`)}),r},n=((e,t)=>{let r=Object.entries(e),s={};for(let[e,a]of r)s[e]=`${t}${a}`;return s})({postLogin:"/auth/login",getRecords:"/records",deleteRecord:"/records/:id",getUrls:"/urls",getAssets:"/assets",getRecordReports:"/recordReports",putRecordReports:"/recordReports/:recordReportId"},`${a.A.CLIENT_API_BASE}/d/admin`),i=s.A.create({}),d=s.A.create({});d.interceptors.request.use(e=>{let t=document.cookie.split("; ").find(e=>e.startsWith("Authorization="))?.split("=")[1];return console.log("token",t),t&&(e.headers.Authorization=t),e},e=>Promise.reject(e));let l=async({email:e,password:t,captchToken:r})=>i.post(n.postLogin,{email:e,password:t,captchToken:r}),c=async({page:e,size:t,uniqueId:r,createdAtGt:s,createdAtLt:a})=>d.get(n.getRecords,{params:{page:e,size:t,uniqueId:r,createdAtGt:s,createdAtLt:a}}),u=async({id:e},{soft:t})=>{let r=o(n.deleteRecord,{id:e});return d.delete(r,{data:{soft:t}})},p=async({page:e,size:t,recordId:r,content:s})=>d.get(n.getUrls,{params:{page:e,size:t,recordId:r,content:s}}),m=async({page:e,size:t,recordId:r,key:s})=>d.get(n.getAssets,{params:{page:e,size:t,recordId:r,key:s}}),h=async({page:e,size:t})=>d.get(n.getRecordReports,{params:{page:e,size:t}}),x=async({recordReportId:e},t)=>{let r=o(n.putRecordReports,{recordReportId:e});return console.log("url",r),d.put(r,{data:t})}},9824:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/haoli/Documents/self-dev/cabbage-admin/src/app/(authorization)/a/record/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/haoli/Documents/self-dev/cabbage-admin/src/app/(authorization)/a/record/page.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,619,921,159,739,331,767],()=>r(8411));module.exports=s})();