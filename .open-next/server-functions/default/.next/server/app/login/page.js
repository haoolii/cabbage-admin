(()=>{var e={};e.id=520,e.ids=[520],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},5961:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(260),n=r(8203),a=r(5155),o=r.n(a),i=r(7292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3751)),"/Users/haoli/Documents/self-dev/cabbage-admin/src/app/login/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/Users/haoli/Documents/self-dev/cabbage-admin/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/haoli/Documents/self-dev/cabbage-admin/src/app/login/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6222:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},4678:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,7174,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},2472:()=>{},7320:()=>{},8035:(e,t,r)=>{Promise.resolve().then(r.bind(r,3751))},3691:(e,t,r)=>{Promise.resolve().then(r.bind(r,5110))},8284:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Turnstile=void 0;let o=a(r(8009));t.Turnstile=({siteKey:e,onVerify:t,onError:r,onExpire:s,onLoad:n,id:a="turnstile-widget",className:i,theme:l="auto",tabIndex:d,responseField:c=!0,responseFieldName:u="cf-turnstile-response",size:p="normal",retry:m="auto",retryInterval:f=8e3,refreshExpired:h="auto",appearance:v="always",execution:x="render",cData:b,language:g,sandbox:y=!1})=>{let w=(0,o.useRef)(),j=(0,o.useRef)(null),P=(0,o.useCallback)(()=>{var e;w.current&&(null===(e=window.turnstile)||void 0===e||e.remove(w.current),w.current=void 0)},[]);(0,o.useEffect)(()=>{let e="cf-turnstile-script";if(document.getElementById(e))window.turnstile&&(_(),null==n||n());else{let t=document.createElement("script");t.id=e,t.src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit&onload=onloadTurnstileCallback",t.async=!0,t.defer=!0,window.onloadTurnstileCallback=()=>{_(),null==n||n()},document.head.appendChild(t)}return P},[e,y]);let _=()=>{j.current&&window.turnstile&&(P(),w.current=window.turnstile.render(j.current,{sitekey:y?"1x00000000000000000000AA":e,callback:t,"error-callback":r,"expired-callback":s,theme:l,tabindex:d,"response-field":c,"response-field-name":u,size:p,retry:m,"retry-interval":f,"refresh-expired":h,appearance:v,execution:x,cdata:b,language:g}))};return o.default.createElement("div",{ref:j,id:a,className:i})}},3234:(e,t,r)=>{"use strict";t.Xs=void 0;var s=r(8284);Object.defineProperty(t,"Xs",{enumerable:!0,get:function(){return s.Turnstile}}),r(588)},588:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function i(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,i)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.validateTurnstileToken=void 0,t.validateTurnstileToken=function({token:e,secretKey:t,remoteip:s,idempotencyKey:n,sandbox:a=!1}){return r(this,void 0,void 0,function*(){let r=new URLSearchParams(Object.assign(Object.assign({secret:a?"1x0000000000000000000000000000000AA":t,response:e},s&&{remoteip:s}),n&&{idempotency_key:n}));try{let e=yield fetch("https://challenges.cloudflare.com/turnstile/v0/siteverify",{method:"POST",body:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return yield e.json()}catch(e){throw Error(`Failed to validate Turnstile token: ${e}`)}})}},5110:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var s=r(5512),n=r(9400),a=r(8009),o=r(4195);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",e),...t}));u.displayName="CardContent";let p=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",e),...t}));p.displayName="CardFooter";var m=r(7722),f=r(2628),h=r(3277),v=r(764),x=r(9334),b=r(3234),g=r(1727);let y=(e,t)=>{let r=new Date;r.setTime(r.getTime()+864e5),document.cookie=`${e}=${t}; expires=${r.toUTCString()}; path=/`};function w(){let e=(0,x.useRouter)(),t=(0,v.m)({defaultValues:{email:"",password:"",captchToken:""},onSubmit:async({value:t})=>{console.log(t);let r=(await (0,h.U5)({email:t.email,password:t.password,captchToken:t.captchToken})).data;console.log(r.data.token),y("Authorization",`Bearer ${r.data.token}`),e.push("/a")},validators:{onSubmit:e=>({fields:{email:e.value.email?void 0:"required",password:e.value.password?void 0:"required",captchToken:e.value.captchToken?void 0:"required"}})}});return(0,s.jsx)("div",{className:"flex justify-center h-screen items-center",children:(0,s.jsx)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await t.validateAllFields("submit"),console.log(t.state.errors),t.handleSubmit()},children:(0,s.jsxs)(i,{className:"w-[350px]",children:[(0,s.jsxs)(l,{children:[(0,s.jsx)(d,{children:"Cabbage Admin"}),(0,s.jsx)(c,{})]}),(0,s.jsxs)(u,{className:"flex flex-col gap-4",children:[(0,s.jsx)(t.Field,{name:"email",children:e=>(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsxs)(f.J,{htmlFor:"email",children:[e.state.meta.errors.length?(0,s.jsx)("b",{className:"text-red-400 mr-1",children:"*"}):"","Email"]}),(0,s.jsx)(m.p,{id:"email",placeholder:"Please enter the email",value:e.state.value,onChange:t=>{e.handleChange(t.target.value)}})]})}),(0,s.jsx)(t.Field,{name:"password",children:e=>(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsx)(f.J,{htmlFor:"password",children:"Password"}),(0,s.jsx)(m.p,{id:"password",placeholder:"Please enter the password",value:e.state.value,type:"password",onChange:t=>{e.handleChange(t.target.value)}})]})})]}),(0,s.jsxs)(p,{className:"flex flex-col gap-4",children:[(0,s.jsx)(t.Field,{name:"captchToken",children:e=>(0,s.jsx)(b.Xs,{siteKey:process.env.NEXT_PUBLIC_TURNSTILE_SITE_KEY,retry:"auto",execution:"render",refreshExpired:"auto",sandbox:"development"===g.A.NODE_ENV,onError:()=>{},onExpire:()=>{},onLoad:()=>{},onVerify:t=>{e.handleChange(t)}})}),(0,s.jsx)(t.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:([e,t])=>(0,s.jsx)(n.$,{type:"submit",disabled:!e,className:"w-44 rounded-2xl",children:t?"Logining":"Login"})})]})]})})})}},9400:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(5512),n=r(8009),a=r(2705),o=r(1643),i=r(4195);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...o},d)=>{let c=n?a.DX:"button";return(0,s.jsx)(c,{className:(0,i.cn)(l({variant:t,size:r,className:e})),ref:d,...o})});d.displayName="Button"},7722:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var s=r(5512),n=r(8009),a=r(4195);let o=n.forwardRef(({className:e,type:t,...r},n)=>(0,s.jsx)("input",{type:t,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));o.displayName="Input"},2628:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(5512),n=r(8009),a=r(2405),o=r(1643),i=r(4195);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)(a.b,{ref:r,className:(0,i.cn)(l(),e),...t}));d.displayName=a.b.displayName},1727:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s={NODE_ENV:"production",CLIENT_BASE:"http://localhost:3000",APP_NAME:"Hello",CLIENT_API_BASE:"http://localhost:3000",NEXT_PUBLIC_TURNSTILE_SITE_KEY:process.env.NEXT_PUBLIC_TURNSTILE_SITE_KEY}},4195:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(2281),n=r(4805);function a(...e){return(0,n.QP)((0,s.$)(e))}},3277:(e,t,r)=>{"use strict";r.d(t,{LK:()=>u,Y:()=>m,lQ:()=>f,tB:()=>c,Jm:()=>p,U5:()=>d,wG:()=>h});var s=r(5668),n=r(1727);let a=(e,t)=>{let r=e;return Object.entries(t).forEach(([e,t])=>{r=r.replace(`:${e}`,`${t}`)}),r},o=((e,t)=>{let r=Object.entries(e),s={};for(let[e,n]of r)s[e]=`${t}${n}`;return s})({postLogin:"/auth/login",getRecords:"/records",deleteRecord:"/records/:id",getUrls:"/urls",getAssets:"/assets",getRecordReports:"/recordReports",putRecordReports:"/recordReports/:recordReportId"},`${n.A.CLIENT_API_BASE}/d/admin`),i=s.A.create({}),l=s.A.create({});l.interceptors.request.use(e=>{let t=document.cookie.split("; ").find(e=>e.startsWith("Authorization="))?.split("=")[1];return console.log("token",t),t&&(e.headers.Authorization=t),e},e=>Promise.reject(e));let d=async({email:e,password:t,captchToken:r})=>i.post(o.postLogin,{email:e,password:t,captchToken:r}),c=async({page:e,size:t,uniqueId:r,createdAtGt:s,createdAtLt:n})=>l.get(o.getRecords,{params:{page:e,size:t,uniqueId:r,createdAtGt:s,createdAtLt:n}}),u=async({id:e},{soft:t})=>{let r=a(o.deleteRecord,{id:e});return l.delete(r,{data:{soft:t}})},p=async({page:e,size:t,recordId:r,content:s})=>l.get(o.getUrls,{params:{page:e,size:t,recordId:r,content:s}}),m=async({page:e,size:t,recordId:r,key:s})=>l.get(o.getAssets,{params:{page:e,size:t,recordId:r,key:s}}),f=async({page:e,size:t})=>l.get(o.getRecordReports,{params:{page:e,size:t}}),h=async({recordReportId:e},t)=>{let r=a(o.putRecordReports,{recordReportId:e});return console.log("url",r),l.put(r,{data:t})}},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>l});var s=r(2740),n=r(2202),a=r.n(n),o=r(4988),i=r.n(o);r(1135);let l={title:"Create Next App",description:"Generated by create next app"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${a().variable} ${i().variable} antialiased`,children:e})})}},3751:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/haoli/Documents/self-dev/cabbage-admin/src/app/login/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/haoli/Documents/self-dev/cabbage-admin/src/app/login/page.tsx","default")},440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(8077);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},1135:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,619,921,159],()=>r(5961));module.exports=s})();